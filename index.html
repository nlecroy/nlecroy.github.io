<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pug Paradise - Games, Hacks & Memes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <h1>ğŸ¶ PUG PARADISE</h1>
            </div>
            <ul class="nav-links">
                <li><a href="#home">ğŸ  Home</a></li>
                <li><a href="#games">ğŸ® Pug Games</a></li>
                <li><a href="other-games.html">ğŸ•¹ï¸ Other Games</a></li>
                <li><a href="shop.html">ğŸ›ï¸ Shop</a></li>
                <li><a href="chatroom.html">ğŸ’¬ Chat</a></li>
                <li><a href="pug-ai.html">ğŸ¤– Pug AI</a></li>
                <li><a href="memes.html">ğŸ˜‚ Memes</a></li>
                <li><a href="utils.html">ğŸ› ï¸ Utils</a></li>
                <li><a href="#hacks">ğŸ’» Hacks</a></li>
                <li><a href="donate.html">ğŸ’– Donate</a></li>
                <li><a href="contact.html">ğŸ“§ Contact</a></li>
                <li><a href="#about">â„¹ï¸ About</a></li>
            </ul>
            <button class="admin-button" onclick="showAdminLogin()" title="Admin Panel">
                ğŸ”§
            </button>
        </nav>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="hero-content">
                <h2>Welcome to Pug Paradise!</h2>
                <p class="tagline">Where pugs reign supreme with games, hacks, and endless memes</p>
                <div class="pug-image">
                    <img src="https://media.giphy.com/media/v4f7aVLX1EoAU/giphy.gif" alt="Nyan Pug" style="max-width: 400px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); animation: float 3s ease-in-out infinite;">
                </div>
                <div class="floating-elements">
                    <span class="float-emoji">ğŸ¦´</span>
                    <span class="float-emoji">ğŸ¾</span>
                    <span class="float-emoji">ğŸ¾</span>
                    <span class="float-emoji delay-1">â­</span>
                    <span class="float-emoji delay-2">ğŸŒˆ</span>
                    <span class="float-emoji delay-3">âœ¨</span>
                    <span class="float-emoji delay-4">ğŸ¨</span>
                    <span class="float-emoji delay-5">ğŸª</span>
                </div>
                <button class="cta-button" onclick="window.location.href='menu.html'">Explore the Pugverse âœ¨</button>
                <div style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; align-items: center; flex-wrap: wrap;">
                    <button onclick="toggleSkittles()" class="cta-button" style="background: linear-gradient(135deg, #ff6b6b, #ee5a6f, #f093fb);" id="skittlesToggleBtnMain">
                        <span id="skittlesStatusText">Enable Skittles ğŸ¬</span>
                    </button>
                    <div style="background: white; padding: 1rem 2rem; border-radius: 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.2);">
                        <span style="font-weight: bold; color: #667eea;">Skittles: </span>
                        <span style="font-weight: bold; font-size: 1.3rem; color: #ff6b6b;" id="skittlesBalanceMain">0</span> ğŸ¬
                    </div>
                </div>
            </div>
        </section>

        <section id="games" class="content-section games-section">
            <h2>ğŸ® Pug Games ğŸ®</h2>
            <div class="card-grid">
                <div class="card card-game1">
                    <div class="card-icon">ğŸƒ</div>
                    <h3>Pug Runner</h3>
                    <p>Help our pug collect treats while avoiding obstacles!</p>
                    <button class="play-button" onclick="window.location.href='games/pug-runner.html'">Play Now ğŸ¯</button>
                </div>
                <div class="card card-game2">
                    <div class="card-icon">ğŸ§ </div>
                    <h3>Pug Memory Match</h3>
                    <p>Match adorable pug expressions in this brain game</p>
                    <button class="play-button" onclick="window.location.href='games/pug-memory.html'">Play Now ğŸ¯</button>
                </div>
                <div class="card card-game3">
                    <div class="card-icon">ğŸ‘†</div>
                    <h3>Pug Clicker</h3>
                    <p>Click to pet infinite pugs and unlock upgrades</p>
                    <button class="play-button" onclick="window.location.href='games/pug-clicker.html'">Play Now ğŸ¯</button>
                </div>
                <div class="card card-game4">
                    <div class="card-icon">ğŸ</div>
                    <h3>Pug Survivor 3D <span class="beta-tag">BETA</span></h3>
                    <p>Fight waves of wasps in 3D! Collect weapons and survive!</p>
                    <button class="play-button" onclick="window.location.href='games/pug-survivor.html'">Play Now ğŸ¯</button>
                </div>
                <div class="card card-game5" style="border: 3px solid #ff0000; box-shadow: 0 0 20px rgba(255,0,0,0.5);">
                    <div class="card-icon">ğŸ”«</div>
                    <h3>Pugs Aren't Evil <span style="background: #ff0000; color: white; padding: 0.3rem 0.6rem; border-radius: 5px; font-size: 0.7rem; animation: pulse 2s infinite;">JUST RELEASED!</span></h3>
                    <p>First-person shooter! A Resident Evil 4 remix - survive the pug apocalypse!</p>
                    <button class="play-button" onclick="window.location.href='games/pugs-arent-evil.html'" style="background: linear-gradient(135deg, #ff0000, #8b0000);">Play Now ğŸ¯</button>
                </div>
            </div>
        </section>

        <section id="hacks" class="content-section hacks-section">
            <h2>ğŸ’¡ Security & Tech Guides ğŸ’¡</h2>
            <p class="section-subtitle">Educational resources for authorized security testing and learning</p>
            <div class="card-grid">
                <div class="card card-hack1">
                    <div class="card-icon">ğŸ§</div>
                    <h3>Kali Linux Setup</h3>
                    <p>Complete guide to installing and configuring Kali Linux for security testing</p>
                    <button class="read-button" onclick="window.location.href='hacks/kali-linux-setup.html'">Read Guide ğŸš€</button>
                </div>
                <div class="card card-hack2">
                    <div class="card-icon">ğŸ”</div>
                    <h3>Essential Nmap Commands</h3>
                    <p>Master network scanning with this comprehensive Nmap command reference</p>
                    <button class="read-button" onclick="window.location.href='hacks/nmap-commands.html'">Read Guide ğŸš€</button>
                </div>
                <div class="card card-hack3">
                    <div class="card-icon">ğŸ›¡ï¸</div>
                    <h3>More Guides Coming Soon</h3>
                    <p>Stay tuned for penetration testing tips, CTF strategies, and more!</p>
                    <button class="read-button" disabled style="opacity: 0.5; cursor: not-allowed;">Coming Soon ğŸ”œ</button>
                </div>
            </div>
        </section>

        <section id="memes" class="content-section memes-section">
            <h2>ğŸ˜‚ Pug Memes ğŸ¤£</h2>
            <div class="meme-gallery">
                <div class="meme-placeholder">
                    <div class="rainbow-text">ğŸ­ Pug Meme Gallery! ğŸ­</div>
                    <p>Pugs being derpy, majestic, and everything in between</p>
                    <div class="meme-emojis">
                        <span>ğŸ˜</span><span>ğŸ¤ª</span><span>ğŸ˜</span><span>ğŸ¥³</span><span>ğŸ¤©</span>
                    </div>
                    <button class="play-button" onclick="window.location.href='memes.html'" style="margin-top: 1.5rem;">
                        View Memes ğŸš€
                    </button>
                </div>
            </div>
        </section>

        <section id="contact" class="content-section">
            <h2>ğŸ“¬ Game Requests & Bug Reports ğŸ›</h2>
            <p class="section-subtitle">Found a bug? Want a specific game added? Let me know!</p>
            <div class="card-grid" style="max-width: 600px; margin: 0 auto;">
                <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                    <div class="card-icon">âœ‰ï¸</div>
                    <h3>Contact Me</h3>
                    <p style="color: rgba(255,255,255,0.9);">Send your game requests, bug reports, or suggestions directly to my email!</p>
                    <a href="mailto:nashlecroy@gmail.com?subject=Pug Paradise - Game Request/Bug Report"
                       style="display: inline-block; background: linear-gradient(135deg, #4ecdc4, #44a6c6); color: white; padding: 1rem 2rem; text-decoration: none; border-radius: 25px; font-weight: bold; margin-top: 1rem; transition: all 0.3s ease;">
                        ğŸ“§ Email Me
                    </a>
                    <p style="color: rgba(255,255,255,0.7); margin-top: 1rem; font-size: 0.9rem;">
                        <strong>Email:</strong> nashlecroy@gmail.com
                    </p>
                    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 15px; text-align: left;">
                        <p style="margin: 0.5rem 0; color: rgba(255,255,255,0.9);"><strong>ğŸ® Game Requests:</strong> Tell me which games you'd like to see!</p>
                        <p style="margin: 0.5rem 0; color: rgba(255,255,255,0.9);"><strong>ğŸ› Bug Reports:</strong> Let me know what's broken</p>
                        <p style="margin: 0.5rem 0; color: rgba(255,255,255,0.9);"><strong>ğŸ’¡ Suggestions:</strong> Share your ideas for improvements</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="content-section">
            <h2>About Pug Paradise</h2>
            <p>This is the ultimate destination for pug lovers who also enjoy gaming, learning cool hacks, and sharing laughs through memes. Built with love by pug enthusiasts, for pug enthusiasts.</p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Pug Paradise. Made with pug love and HTML.</p>
    </footer>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 3rem; border-radius: 20px; max-width: 500px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.5);" onclick="event.stopPropagation()">
            <h2 style="color: white; margin-bottom: 1rem; font-size: 2rem;">ğŸ” PUG ADMIN PANEL</h2>
            <p style="color: rgba(255,255,255,0.9); margin-bottom: 1.5rem;">Enter the secret pug code</p>
            <input type="password" id="adminPasswordInput" placeholder="Enter admin password..." style="width: 100%; padding: 1rem; border: 3px solid #4ecdc4; border-radius: 25px; font-size: 1rem; margin-bottom: 1rem;" onkeypress="if(event.key==='Enter') checkAdminPassword()">
            <div style="display: flex; gap: 1rem; justify-content: center;">
                <button onclick="checkAdminPassword()" style="background: linear-gradient(135deg, #4ecdc4, #44a6c6); color: white; border: none; padding: 1rem 2rem; border-radius: 25px; font-size: 1rem; font-weight: bold; cursor: pointer;">
                    Submit ğŸš€
                </button>
                <button onclick="closeAdminLogin()" style="background: linear-gradient(135deg, #ff6b6b, #ee5a6f); color: white; border: none; padding: 1rem 2rem; border-radius: 25px; font-size: 1rem; font-weight: bold; cursor: pointer;">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, rgba(20,20,30,0.98), rgba(50,20,70,0.98)); padding: 2rem; border-radius: 20px; max-width: 800px; width: 90%; max-height: 80vh; overflow-y: auto; z-index: 10001; box-shadow: 0 0 50px rgba(102, 126, 234, 0.8), 0 0 100px rgba(240, 147, 251, 0.5); border: 3px solid #4ecdc4;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <h2 style="color: #4ecdc4; margin: 0; font-size: 2rem;">ğŸ”§ PUG ADMIN PANEL ğŸ¶</h2>
            <button onclick="closeAdminPanel()" style="background: #ff6b6b; color: white; border: none; padding: 0.5rem 1rem; border-radius: 10px; font-size: 1.2rem; cursor: pointer; font-weight: bold;">âœ•</button>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <!-- Theme Controls -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">ğŸ¨ Themes</h3>
                <button onclick="activateDarkMode()" class="admin-btn">ğŸŒ™ Dark Mode</button>
                <button onclick="activateRainbowMode()" class="admin-btn">ğŸŒˆ Rainbow Mode</button>
                <button onclick="resetTheme()" class="admin-btn">â†º Reset Theme</button>
            </div>

            <!-- Animation Controls -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">âš¡ Animations</h3>
                <button onclick="speedUpAnimations()" class="admin-btn">âš¡ Speed Up</button>
                <button onclick="slowDownAnimations()" class="admin-btn">ğŸŒ Slow Down</button>
                <button onclick="stopAnimations()" class="admin-btn">â¸ï¸ Stop All</button>
            </div>

            <!-- Special Effects -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">âœ¨ Effects</h3>
                <button onclick="triggerConfetti()" class="admin-btn">ğŸ‰ Confetti</button>
                <button onclick="triggerPugRain()" class="admin-btn">ğŸ¶ Pug Rain</button>
                <button onclick="triggerMatrix()" class="admin-btn">ğŸŸ¢ Matrix Mode</button>
            </div>

            <!-- Text Modifiers -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">ğŸ“ Text Mods</h3>
                <button onclick="makeTextBig()" class="admin-btn">ğŸ”¤ BIG TEXT</button>
                <button onclick="makeTextWobble()" class="admin-btn">ã€°ï¸ Wobble</button>
                <button onclick="makeTextRainbow()" class="admin-btn">ğŸŒˆ Rainbow</button>
            </div>

            <!-- Easter Eggs -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">ğŸ¥š Easter Eggs</h3>
                <button onclick="secretMessage()" class="admin-btn">ğŸ’¬ Secret Msg</button>
                <button onclick="pugCounter()" class="admin-btn">ğŸ”¢ Pug Count</button>
                <button onclick="playPugSound()" class="admin-btn">ğŸ”Š Pug Sound</button>
            </div>

            <!-- Background Controls -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">ğŸ–¼ï¸ Background</h3>
                <button onclick="changeBgColor()" class="admin-btn">ğŸ¨ Random Color</button>
                <button onclick="addSnowEffect()" class="admin-btn">â„ï¸ Snow Effect</button>
                <button onclick="clearEffects()" class="admin-btn">ğŸ§¹ Clear All</button>
            </div>

            <!-- Skittles Controls -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">ğŸ¬ Skittles</h3>
                <button onclick="toggleSkittles()" class="admin-btn" id="skittlesToggleBtn">ğŸ¬ Toggle Skittles</button>
                <button onclick="spawnSkittle()" class="admin-btn">âœ¨ Spawn Skittle</button>
                <button onclick="refreshItemEffects()" class="admin-btn">ğŸ”„ Refresh Upgrades</button>
                <div style="color: #4ecdc4; margin-top: 1rem; font-weight: bold;">Balance: <span id="skittlesBalance">0</span></div>
            </div>

            <!-- Skittles Management (Admin Only) -->
            <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 15px; border: 2px solid rgba(78,205,196,0.3);">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">ğŸ’° Skittles Management</h3>
                <div style="margin-bottom: 1rem;">
                    <input type="number" id="giveSkittlesAmount" placeholder="Amount..." style="padding: 0.5rem; border-radius: 10px; border: 2px solid #4ecdc4; width: 100px; margin-right: 0.5rem;">
                    <button onclick="giveYourselfSkittles()" class="admin-btn">ğŸ’¸ Give Yourself</button>
                </div>
                <div style="margin-bottom: 1rem;">
                    <input type="text" id="giftUsername" placeholder="Username..." style="padding: 0.5rem; border-radius: 10px; border: 2px solid #4ecdc4; width: 150px; margin-right: 0.5rem;">
                    <input type="number" id="giftAmount" placeholder="Amount..." style="padding: 0.5rem; border-radius: 10px; border: 2px solid #4ecdc4; width: 100px; margin-right: 0.5rem;">
                    <button onclick="giftSkittles()" class="admin-btn">ğŸ Gift</button>
                </div>
                <p style="color: rgba(255,255,255,0.7); font-size: 0.8rem; margin-top: 0.5rem;">âš ï¸ Admin can gift skittles without having them!</p>
            </div>
        </div>

        <div style="margin-top: 2rem; padding: 1rem; background: rgba(255,215,0,0.2); border-radius: 10px; border: 2px solid #ffd700;">
            <p style="color: #ffd700; text-align: center; margin: 0; font-weight: bold;">ğŸ‘‘ You are now the PUG MASTER! ğŸ‘‘</p>
        </div>
    </div>

    <style>
        .admin-btn {
            width: 100%;
            background: linear-gradient(135deg, #4ecdc4, #44a6c6);
            color: white;
            border: none;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .admin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.5);
        }

        .pug-rain {
            position: fixed;
            font-size: 2rem;
            animation: fall linear;
            pointer-events: none;
            z-index: 9999;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        .wobble-text {
            animation: wobble 0.5s ease-in-out infinite;
        }

        @keyframes wobble {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }

        .rainbow-text {
            background: linear-gradient(45deg, #ff0000, #ff7700, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbowShift 3s ease infinite;
        }

        @keyframes rainbowShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .skittle {
            position: fixed;
            width: 40px;
            height: 40px;
            cursor: pointer;
            z-index: 9999;
            animation: skittleFloat 3s ease-in-out infinite, skittlePulse 1s ease-in-out infinite;
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 10px rgba(255, 107, 107, 0.8));
        }

        .skittle:hover {
            transform: scale(1.3) rotate(20deg);
            filter: drop-shadow(0 0 20px rgba(255, 107, 107, 1));
        }

        @keyframes skittleFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes skittlePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .skittle-collect {
            animation: skittleCollect 0.5s ease-out;
        }

        @keyframes skittleCollect {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg) translateY(-100px); opacity: 0; }
        }
    </style>

    <!-- Login/Signup Modal -->
    <div id="authModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10003; justify-content: center; align-items: center;">
        <div style="background: linear-gradient(135deg, #667eea, #764ba2, #f093fb); padding: 3rem; border-radius: 20px; max-width: 500px; width: 90%; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.5);" onclick="event.stopPropagation()">
            <h1 style="color: white; margin-bottom: 1rem; font-size: 2.5rem;">ğŸ¶ Welcome to Pug Paradise!</h1>
            <p style="color: rgba(255,255,255,0.9); margin-bottom: 2rem; font-size: 1.1rem;">Sign up or log in to continue</p>

            <div id="signupForm">
                <input type="text" id="signupUsername" placeholder="Choose a username..." style="width: 100%; padding: 1rem; border: 3px solid white; border-radius: 25px; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: bold;">
                <input type="email" id="signupEmail" placeholder="Email address..." style="width: 100%; padding: 1rem; border: 3px solid white; border-radius: 25px; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: bold;">
                <input type="password" id="signupPassword" placeholder="Choose a password..." style="width: 100%; padding: 1rem; border: 3px solid white; border-radius: 25px; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: bold;">
                <button onclick="signUp()" style="width: 100%; background: linear-gradient(135deg, #f093fb, #f5576c); color: white; border: none; padding: 1rem 2rem; border-radius: 25px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-bottom: 1rem;">Sign Up ğŸš€</button>
                <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Already have an account? <a href="#" onclick="toggleAuthMode(); return false;" style="color: #4ecdc4; text-decoration: underline; font-weight: bold;">Log In</a></p>
            </div>

            <div id="loginForm" style="display: none;">
                <input type="email" id="loginEmail" placeholder="Email address..." style="width: 100%; padding: 1rem; border: 3px solid white; border-radius: 25px; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: bold;">
                <input type="password" id="loginPassword" placeholder="Password..." style="width: 100%; padding: 1rem; border: 3px solid white; border-radius: 25px; font-size: 1rem; margin-bottom: 1rem; text-align: center; font-weight: bold;">
                <button onclick="logIn()" style="width: 100%; background: linear-gradient(135deg, #4ecdc4, #44a6c6); color: white; border: none; padding: 1rem 2rem; border-radius: 25px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-bottom: 1rem;">Log In ğŸ”‘</button>
                <p style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">Don't have an account? <a href="#" onclick="toggleAuthMode(); return false;" style="color: #4ecdc4; text-decoration: underline; font-weight: bold;">Sign Up</a></p>
            </div>

            <div id="userInfo" style="display: none;">
                <p style="color: white; font-size: 1.2rem; margin-bottom: 1rem;">Welcome back, <strong id="displayUsername"></strong>! ğŸ‰</p>
                <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">Your skittles: <span id="userSkittles" style="color: #ffd700; font-weight: bold; font-size: 1.3rem;">0</span> ğŸ¬</p>
                <button onclick="continueToSite()" style="width: 100%; background: linear-gradient(135deg, #f093fb, #f5576c); color: white; border: none; padding: 1rem 2rem; border-radius: 25px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-bottom: 0.5rem;">Continue to Site ğŸš€</button>
                <button onclick="logOut()" style="width: 100%; background: linear-gradient(135deg, #95a5a6, #7f8c8d); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 25px; font-size: 0.9rem; font-weight: bold; cursor: pointer;">Log Out</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getDatabase, ref, set, get, update } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAPHVHk397y7MpeEZFPuskOqp-IEdiRJ5k",
            authDomain: "pug-31646.firebaseapp.com",
            databaseURL: "https://pug-31646-default-rtdb.firebaseio.com",
            projectId: "pug-31646",
            storageBucket: "pug-31646.firebasestorage.app",
            messagingSenderId: "278556306232",
            appId: "1:278556306232:web:7a82def7c10a1c22f2afcd",
            measurementId: "G-2TBFS939SL"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        let currentUserData = null;

        // Check auth state on load
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                // User is signed in
                const userRef = ref(database, `users/${user.uid}`);
                const snapshot = await get(userRef);

                if (snapshot.exists()) {
                    currentUserData = snapshot.val();
                    document.getElementById('displayUsername').textContent = currentUserData.username;
                    document.getElementById('userSkittles').textContent = currentUserData.skittles || 0;

                    // Sync skittles to localStorage
                    localStorage.setItem('skittles', currentUserData.skittles || 0);
                    localStorage.setItem('inventory', JSON.stringify(currentUserData.inventory || []));
                    localStorage.setItem('currentUsername', currentUserData.username);
                    localStorage.setItem('userId', user.uid);

                    document.getElementById('signupForm').style.display = 'none';
                    document.getElementById('loginForm').style.display = 'none';
                    document.getElementById('userInfo').style.display = 'block';
                    document.getElementById('authModal').style.display = 'flex';
                }
            } else {
                // No user signed in
                document.getElementById('authModal').style.display = 'flex';
                document.getElementById('signupForm').style.display = 'block';
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('userInfo').style.display = 'none';
            }
        });

        window.signUp = async function() {
            const username = document.getElementById('signupUsername').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;

            if (!username || !email || !password) {
                alert('Please fill in all fields!');
                return;
            }

            if (password.length < 6) {
                alert('Password must be at least 6 characters!');
                return;
            }

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Create user data in database
                await set(ref(database, `users/${user.uid}`), {
                    username: username,
                    email: email,
                    skittles: 0,
                    inventory: [],
                    isAdmin: false,
                    createdAt: Date.now()
                });

                alert('ğŸ‰ Account created successfully! Welcome to Pug Paradise!');
            } catch (error) {
                alert('Error: ' + error.message);
            }
        };

        window.logIn = async function() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                alert('Please fill in all fields!');
                return;
            }

            try {
                await signInWithEmailAndPassword(auth, email, password);
                alert('âœ… Logged in successfully!');
            } catch (error) {
                alert('Error: ' + error.message);
            }
        };

        window.logOut = async function() {
            if (confirm('Are you sure you want to log out?')) {
                try {
                    await signOut(auth);
                    localStorage.clear();
                    location.reload();
                } catch (error) {
                    alert('Error logging out: ' + error.message);
                }
            }
        };

        window.toggleAuthMode = function() {
            const signupForm = document.getElementById('signupForm');
            const loginForm = document.getElementById('loginForm');

            if (signupForm.style.display !== 'none') {
                signupForm.style.display = 'none';
                loginForm.style.display = 'block';
            } else {
                signupForm.style.display = 'block';
                loginForm.style.display = 'none';
            }
        };

        window.continueToSite = function() {
            document.getElementById('authModal').style.display = 'none';
            loadSkittles();
        };

        // Sync skittles to Firebase periodically
        setInterval(async () => {
            const userId = localStorage.getItem('userId');
            if (userId) {
                const skittles = parseInt(localStorage.getItem('skittles') || '0');
                const inventory = JSON.parse(localStorage.getItem('inventory') || '[]');

                await update(ref(database, `users/${userId}`), {
                    skittles: skittles,
                    inventory: inventory
                });
            }
        }, 10000); // Sync every 10 seconds
    </script>

    <script>
        const ADMIN_PASSWORD = 'PUGATTACK6767';
        const SAVED_ADMIN_CODE = localStorage.getItem('adminCode');

        function showAdminLogin() {
            // Check if admin code is saved
            if (SAVED_ADMIN_CODE === ADMIN_PASSWORD) {
                document.getElementById('adminPanel').style.display = 'block';
                return;
            }

            document.getElementById('adminLoginModal').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('adminPasswordInput').focus();
            }, 100);
        }

        function closeAdminLogin() {
            document.getElementById('adminLoginModal').style.display = 'none';
            document.getElementById('adminPasswordInput').value = '';
        }

        function checkAdminPassword() {
            const password = document.getElementById('adminPasswordInput').value;

            if (password === ADMIN_PASSWORD) {
                // Save admin code
                localStorage.setItem('adminCode', password);
                closeAdminLogin();
                document.getElementById('adminPanel').style.display = 'block';
                alert('ğŸ‰ Welcome to the PUG ADMIN PANEL! You have the power! ğŸ¶\n\nâœ… Admin code saved - you won\'t need to enter it again!');
            } else {
                alert('âŒ Incorrect password! Nice try, but you need the secret pug code!');
                document.getElementById('adminPasswordInput').value = '';
                document.getElementById('adminPasswordInput').focus();
            }
        }

        function closeAdminPanel() {
            document.getElementById('adminPanel').style.display = 'none';
        }

        // Theme Controls
        function activateDarkMode() {
            document.body.style.background = 'linear-gradient(135deg, #1a1a2e, #16213e, #0f3460)';
            document.body.style.color = '#eee';
            alert('ğŸŒ™ Dark Mode Activated!');
        }

        function activateRainbowMode() {
            document.body.style.background = 'linear-gradient(135deg, #ff0000, #ff7700, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3)';
            document.body.style.backgroundSize = '400% 400%';
            document.body.style.animation = 'rainbowShift 3s ease infinite';
            alert('ğŸŒˆ Rainbow Mode Activated!');
        }

        function resetTheme() {
            document.body.style.background = 'linear-gradient(135deg, #ffd89b 0%, #19547b 50%, #f093fb 100%)';
            document.body.style.backgroundSize = '400% 400%';
            document.body.style.animation = 'gradientShift 15s ease infinite';
            document.body.style.color = '#3d2817';
            alert('â†º Theme Reset to Default!');
        }

        // Animation Controls
        let animationSpeed = 1;

        function speedUpAnimations() {
            animationSpeed = 0.3;
            document.querySelectorAll('*').forEach(el => {
                el.style.animationDuration = `${parseFloat(getComputedStyle(el).animationDuration) * animationSpeed}s`;
            });
            alert('âš¡ Animations are now SUPER FAST!');
        }

        function slowDownAnimations() {
            animationSpeed = 3;
            document.querySelectorAll('*').forEach(el => {
                if (getComputedStyle(el).animationName !== 'none') {
                    el.style.animationDuration = `${parseFloat(getComputedStyle(el).animationDuration) * animationSpeed}s`;
                }
            });
            alert('ğŸŒ Animations are now in slow motion!');
        }

        function stopAnimations() {
            document.querySelectorAll('*').forEach(el => {
                el.style.animationPlayState = 'paused';
            });
            alert('â¸ï¸ All animations stopped!');
        }

        // Special Effects
        function triggerConfetti() {
            const colors = ['ğŸ‰', 'ğŸŠ', 'âœ¨', 'â­', 'ğŸŒŸ', 'ğŸ’«'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.textContent = colors[Math.floor(Math.random() * colors.length)];
                    confetti.className = 'pug-rain';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    confetti.style.top = '-50px';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 50);
            }
            alert('ğŸ‰ CONFETTI EXPLOSION!');
        }

        function triggerPugRain() {
            const pugs = ['ğŸ¶', 'ğŸ•', 'ğŸ¦®', 'ğŸ©', 'ğŸ¾'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const pug = document.createElement('div');
                    pug.textContent = pugs[Math.floor(Math.random() * pugs.length)];
                    pug.className = 'pug-rain';
                    pug.style.left = Math.random() * 100 + 'vw';
                    pug.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    pug.style.top = '-50px';
                    document.body.appendChild(pug);
                    setTimeout(() => pug.remove(), 6000);
                }, i * 100);
            }
            alert('ğŸ¶ IT\'S RAINING PUGS!');
        }

        function triggerMatrix() {
            document.body.style.background = '#000';
            document.body.style.color = '#00ff00';
            const chars = '01ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆ';
            const columns = Math.floor(window.innerWidth / 20);

            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const char = document.createElement('div');
                    char.textContent = chars.charAt(Math.floor(Math.random() * chars.length));
                    char.style.position = 'fixed';
                    char.style.left = Math.random() * 100 + 'vw';
                    char.style.top = Math.random() * 100 + 'vh';
                    char.style.color = '#00ff00';
                    char.style.fontSize = '1.5rem';
                    char.style.opacity = Math.random();
                    char.style.zIndex = '9998';
                    document.body.appendChild(char);
                    setTimeout(() => char.remove(), 3000);
                }, i * 30);
            }
            alert('ğŸŸ¢ ENTERING THE MATRIX...');
        }

        // Text Modifiers
        function makeTextBig() {
            document.querySelectorAll('h1, h2, h3, p, a, button, span').forEach(el => {
                el.style.fontSize = '2em';
            });
            alert('ğŸ”¤ EVERYTHING IS BIG NOW!');
        }

        function makeTextWobble() {
            document.querySelectorAll('h1, h2, h3').forEach(el => {
                el.classList.add('wobble-text');
            });
            alert('ã€°ï¸ Text is now wobbly!');
        }

        function makeTextRainbow() {
            document.querySelectorAll('h1, h2, h3').forEach(el => {
                el.classList.add('rainbow-text');
            });
            alert('ğŸŒˆ Rainbow text activated!');
        }

        // Easter Eggs
        function secretMessage() {
            alert('ğŸ¶ SECRET PUG MESSAGE: The pugs are planning world domination... but first, treats! ğŸ¦´');
        }

        function pugCounter() {
            const bodyText = document.body.innerText.toLowerCase();
            const pugCount = (bodyText.match(/pug/g) || []).length;
            alert(`ğŸ”¢ The word "pug" appears ${pugCount} times on this page! That's a lot of pugs! ğŸ¶`);
        }

        function playPugSound() {
            const sounds = ['WOOF!', 'ARF ARF!', 'SNORT!', '*heavy breathing*', 'BORK BORK!'];
            const sound = sounds[Math.floor(Math.random() * sounds.length)];
            const soundDiv = document.createElement('div');
            soundDiv.textContent = sound;
            soundDiv.style.position = 'fixed';
            soundDiv.style.top = '50%';
            soundDiv.style.left = '50%';
            soundDiv.style.transform = 'translate(-50%, -50%)';
            soundDiv.style.fontSize = '5rem';
            soundDiv.style.fontWeight = 'bold';
            soundDiv.style.color = '#ffd700';
            soundDiv.style.textShadow = '0 0 20px #ff6b35';
            soundDiv.style.zIndex = '10002';
            soundDiv.style.animation = 'wobble 0.5s ease-in-out';
            document.body.appendChild(soundDiv);
            setTimeout(() => soundDiv.remove(), 1500);
        }

        // Background Controls
        function changeBgColor() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f093fb', '#ffd89b', '#19547b', '#764ba2'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.style.background = randomColor;
            alert(`ğŸ¨ Background changed to a random color!`);
        }

        function addSnowEffect() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const snowflake = document.createElement('div');
                    snowflake.textContent = 'â„ï¸';
                    snowflake.className = 'pug-rain';
                    snowflake.style.left = Math.random() * 100 + 'vw';
                    snowflake.style.animationDuration = (Math.random() * 3 + 5) + 's';
                    snowflake.style.top = '-50px';
                    document.body.appendChild(snowflake);
                    setTimeout(() => snowflake.remove(), 10000);
                }, i * 100);
            }
            alert('â„ï¸ Let it snow, let it snow, let it snow!');
        }

        function clearEffects() {
            document.querySelectorAll('.pug-rain').forEach(el => el.remove());
            document.querySelectorAll('.wobble-text').forEach(el => el.classList.remove('wobble-text'));
            document.querySelectorAll('.rainbow-text').forEach(el => el.classList.remove('rainbow-text'));
            document.querySelectorAll('*').forEach(el => {
                el.style.animationPlayState = 'running';
            });
            resetTheme();
            alert('ğŸ§¹ All effects cleared!');
        }

        // Skittles Management Functions
        function giveYourselfSkittles() {
            const amount = parseInt(document.getElementById('giveSkittlesAmount').value);
            if (isNaN(amount) || amount <= 0) {
                alert('Please enter a valid amount!');
                return;
            }

            const currentSkittles = loadSkittles();
            saveSkittles(currentSkittles + amount);
            alert(`ğŸ’° Added ${amount} skittles to your account! New balance: ${currentSkittles + amount}`);
            document.getElementById('giveSkittlesAmount').value = '';
        }

        async function giftSkittles() {
            const username = document.getElementById('giftUsername').value.trim();
            const amount = parseInt(document.getElementById('giftAmount').value);

            if (!username || isNaN(amount) || amount <= 0) {
                alert('Please enter a valid username and amount!');
                return;
            }

            // Import Firebase functions
            const { getDatabase, ref, get, update } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js');
            const database = getDatabase();

            try {
                // Find user by username
                const usersRef = ref(database, 'users');
                const snapshot = await get(usersRef);

                let foundUser = null;
                snapshot.forEach((child) => {
                    if (child.val().username === username) {
                        foundUser = { uid: child.key, data: child.val() };
                    }
                });

                if (!foundUser) {
                    alert(`âŒ User "${username}" not found!`);
                    return;
                }

                // Gift skittles (admin doesn't need to have them)
                const newBalance = (foundUser.data.skittles || 0) + amount;
                await update(ref(database, `users/${foundUser.uid}`), {
                    skittles: newBalance
                });

                alert(`ğŸ Gifted ${amount} skittles to ${username}! Their new balance: ${newBalance}`);
                document.getElementById('giftUsername').value = '';
                document.getElementById('giftAmount').value = '';
            } catch (error) {
                alert('Error: ' + error.message);
            }
        }

        // Close admin panel with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeAdminPanel();
                closeAdminLogin();
            }
        });

        // Debug function to add test items (type in console: testUpgrades())
        window.testUpgrades = function() {
            const testItems = [
                { id: 10, name: "Infinity Treat", icon: "ğŸ–", description: "Ultimate power-up!", price: 500, tradable: false },
                { id: 3, name: "Skittle Magnet", icon: "ğŸ§²", description: "2x collection!", price: 200, tradable: false },
                { id: 4, name: "Top Hat of Fortune", icon: "ğŸ©", description: "Luck!", price: 120, tradable: true, tradeValue: 80 }
            ];

            localStorage.setItem('inventory', JSON.stringify(testItems));
            console.log('ğŸ§ª Test items added! Run refreshItemEffects() to activate them.');
            alert('ğŸ§ª Test items added! Click "Refresh Upgrades" in admin panel or type refreshItemEffects() in console!');
        };

        // Debug: Log current inventory
        window.checkInventory = function() {
            const inv = getOwnedItems();
            console.log('ğŸ“¦ Current Inventory:', inv);
            console.log('ğŸ“Š Item count:', inv.length);
            inv.forEach(item => {
                console.log(`  - ${item.icon} ${item.name}`);
            });
            return inv;
        };

        // Skittles System
        let skittlesEnabled = localStorage.getItem('skittlesEnabled') === 'true' || false;
        let skittlesInterval = null;
        const SKITTLE_IMG = 'https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExN3o5OXY1M2t2emR5eng5ZWtqbTFiaGMzOTBnMTU1eDlvZmo2em82eiZlcD12MV9zdGlja2Vyc19zZWFyY2gmY3Q9cw/TJn15TuEjuDSkTEJzO/giphy.gif';

        function loadSkittles() {
            const skittles = parseInt(localStorage.getItem('skittles') || '0');
            document.getElementById('skittlesBalance').textContent = skittles;
            document.getElementById('skittlesBalanceMain').textContent = skittles;
            return skittles;
        }

        function saveSkittles(amount) {
            localStorage.setItem('skittles', amount.toString());
            loadSkittles();
        }

        function toggleSkittles() {
            skittlesEnabled = !skittlesEnabled;
            localStorage.setItem('skittlesEnabled', skittlesEnabled.toString());

            const statusText = document.getElementById('skittlesStatusText');
            statusText.textContent = skittlesEnabled ? 'Disable Skittles ğŸ¬' : 'Enable Skittles ğŸ¬';

            if (skittlesEnabled) {
                startSkittlesSpawning();
                showActiveEffects();
                alert('ğŸ¬ Skittles are now enabled! They will randomly appear on the site - click them to collect!');
            } else {
                stopSkittlesSpawning();
                document.querySelectorAll('.skittle').forEach(s => s.remove());
                alert('Skittles disabled!');
            }
        }

        function showActiveEffects() {
            const inventory = getOwnedItems();
            if (inventory.length === 0) return;

            const effectsDiv = document.createElement('div');
            effectsDiv.id = 'activeEffects';
            effectsDiv.style.position = 'fixed';
            effectsDiv.style.bottom = '20px';
            effectsDiv.style.left = '20px';
            effectsDiv.style.background = 'rgba(0,0,0,0.8)';
            effectsDiv.style.color = 'white';
            effectsDiv.style.padding = '1rem';
            effectsDiv.style.borderRadius = '15px';
            effectsDiv.style.zIndex = '10000';
            effectsDiv.style.maxWidth = '300px';
            effectsDiv.style.fontSize = '0.9rem';

            let effects = '<strong>ğŸ”¥ Active Effects:</strong><br>';

            if (hasItem('Infinity Treat')) effects += 'â€¢ 3x Skittles<br>';
            if (hasItem('Hacker Shades')) effects += 'â€¢ 1.5x Skittles Bonus<br>';
            if (hasItem('Pug Crown')) effects += 'â€¢ +2 Skittles Per Collect<br>';
            if (hasItem('Top Hat of Fortune')) effects += 'â€¢ Double Spawn Rate<br>';
            if (hasItem('Skittle Magnet')) effects += 'â€¢ Fast Spawning (8s)<br>';
            if (hasItem('Lightning Speed Boots')) effects += 'â€¢ 30% Faster Spawns<br>';
            if (hasItem('Skittle Printer')) effects += 'â€¢ +10 Skittles/Minute<br>';
            if (hasItem('Nyan Pug Transformation')) effects += 'â€¢ Rainbow Cursor Trail<br>';
            if (hasItem('Laser Eyes')) effects += 'â€¢ Laser Click Effects<br>';
            if (hasItem('Diamond Shield')) effects += 'â€¢ Shield Protection<br>';

            effectsDiv.innerHTML = effects;

            // Remove old effects div if it exists
            const oldDiv = document.getElementById('activeEffects');
            if (oldDiv) oldDiv.remove();

            document.body.appendChild(effectsDiv);
        }

        function getOwnedItems() {
            return JSON.parse(localStorage.getItem('inventory') || '[]');
        }

        function hasItem(itemName) {
            const inventory = getOwnedItems();
            return inventory.some(item => item.name === itemName);
        }

        function startSkittlesSpawning() {
            // Stop existing interval first
            if (skittlesInterval) {
                clearInterval(skittlesInterval);
                skittlesInterval = null;
            }

            // Check for upgrades that affect spawn rate
            let spawnChance = 0.3; // Base 30% chance
            let spawnInterval = 15000; // Base 15 seconds

            // Top Hat of Fortune - rare skittles appear more often
            if (hasItem('Top Hat of Fortune')) {
                spawnChance = 0.6; // Double spawn chance
                console.log('âœ… Top Hat of Fortune active - Double spawn chance!');
            }

            // Skittle Magnet - 2x collection rate means more frequent spawns
            if (hasItem('Skittle Magnet')) {
                spawnInterval = 8000; // Spawn much faster
                spawnChance = 0.5;
                console.log('âœ… Skittle Magnet active - Spawning every 8 seconds!');
            }

            // Lightning Speed Boots - faster everything
            if (hasItem('Lightning Speed Boots')) {
                spawnInterval = Math.floor(spawnInterval * 0.7); // 30% faster
                console.log('âœ… Lightning Speed Boots active - 30% faster!');
            }

            console.log(`ğŸ¬ Skittles spawning every ${spawnInterval}ms with ${spawnChance * 100}% chance`);

            skittlesInterval = setInterval(() => {
                if (Math.random() < spawnChance) {
                    spawnSkittle();
                }
            }, spawnInterval);
        }

        function stopSkittlesSpawning() {
            if (skittlesInterval) {
                clearInterval(skittlesInterval);
                skittlesInterval = null;
            }
        }

        function spawnSkittle() {
            const skittle = document.createElement('img');
            skittle.src = SKITTLE_IMG;
            skittle.className = 'skittle';

            // Random position on screen
            const x = Math.random() * (window.innerWidth - 60);
            const y = Math.random() * (window.innerHeight - 60);
            skittle.style.left = x + 'px';
            skittle.style.top = y + 'px';

            // Click to collect
            skittle.onclick = () => collectSkittle(skittle);

            document.body.appendChild(skittle);

            // Auto-remove after 10 seconds if not collected
            setTimeout(() => {
                if (document.body.contains(skittle)) {
                    skittle.remove();
                }
            }, 10000);
        }

        function collectSkittle(skittleElement) {
            skittleElement.classList.add('skittle-collect');

            // Calculate skittles based on multipliers
            let skittlesEarned = 1;
            let multiplierText = '';

            // Infinity Treat - 3x multiplier
            if (hasItem('Infinity Treat')) {
                skittlesEarned *= 3;
                multiplierText += ' (Infinity Treat x3)';
                console.log('âœ… Infinity Treat multiplier applied!');
            }

            // Hacker Shades - reveals bonus skittles (1.5x)
            if (hasItem('Hacker Shades')) {
                skittlesEarned = Math.floor(skittlesEarned * 1.5);
                multiplierText += ' (Hacker Shades x1.5)';
                console.log('âœ… Hacker Shades bonus applied!');
            }

            // Pug Crown - VIP bonus (+2 skittles)
            if (hasItem('Pug Crown')) {
                skittlesEarned += 2;
                multiplierText += ' (Pug Crown +2)';
                console.log('âœ… Pug Crown bonus applied!');
            }

            console.log(`ğŸ’° Collected ${skittlesEarned} skittles!${multiplierText}`);

            const currentSkittles = loadSkittles();
            saveSkittles(currentSkittles + skittlesEarned);

            // Show notification
            const notif = document.createElement('div');
            notif.textContent = `+${skittlesEarned} Skittle${skittlesEarned > 1 ? 's' : ''}! ğŸ¬`;
            notif.style.position = 'fixed';
            notif.style.left = skittleElement.style.left;
            notif.style.top = (parseInt(skittleElement.style.top) - 50) + 'px';
            notif.style.color = skittlesEarned > 1 ? '#ffd700' : '#ff6b6b';
            notif.style.fontWeight = 'bold';
            notif.style.fontSize = skittlesEarned > 2 ? '2rem' : '1.5rem';
            notif.style.zIndex = '10000';
            notif.style.animation = 'fadeOut 1s ease-out';
            notif.style.pointerEvents = 'none';
            notif.style.textShadow = '0 0 10px rgba(255,215,0,0.8)';
            document.body.appendChild(notif);

            setTimeout(() => {
                skittleElement.remove();
                notif.remove();
            }, 500);
        }

        // Apply visual effects based on owned items
        function applyItemEffects() {
            // Nyan Pug Transformation - Rainbow trail on cursor
            if (hasItem('Nyan Pug Transformation')) {
                document.addEventListener('mousemove', (e) => {
                    const trail = document.createElement('div');
                    trail.textContent = 'ğŸŒˆ';
                    trail.style.position = 'fixed';
                    trail.style.left = e.clientX + 'px';
                    trail.style.top = e.clientY + 'px';
                    trail.style.pointerEvents = 'none';
                    trail.style.fontSize = '1.5rem';
                    trail.style.zIndex = '9998';
                    trail.style.opacity = '1';
                    trail.style.transition = 'all 0.5s ease-out';
                    document.body.appendChild(trail);
                    setTimeout(() => {
                        trail.style.opacity = '0';
                        trail.style.transform = 'translateY(20px)';
                    }, 10);
                    setTimeout(() => trail.remove(), 500);
                });
            }

            // Rocket Jetpack - Floating animation on body
            if (hasItem('Rocket Jetpack')) {
                document.body.style.animation = 'float 3s ease-in-out infinite';
            }

            // Gravity Defier - Make page elements bounce
            if (hasItem('Gravity Defier')) {
                document.querySelectorAll('h1, h2, h3').forEach(el => {
                    el.style.animation = 'bounce 2s ease-in-out infinite';
                });
            }

            // Time Manipulator - Slow down animations
            if (hasItem('Time Manipulator')) {
                document.querySelectorAll('*').forEach(el => {
                    const currentDuration = getComputedStyle(el).animationDuration;
                    if (currentDuration !== '0s') {
                        el.style.animationDuration = `${parseFloat(currentDuration) * 2}s`;
                    }
                });
            }

            // Invisible Cloak - Make cursor invisible
            if (hasItem('Invisible Cloak')) {
                document.body.style.cursor = 'none';
            }

            // Diamond Shield - Add shield effect
            if (hasItem('Diamond Shield')) {
                const shield = document.createElement('div');
                shield.style.position = 'fixed';
                shield.style.top = '0';
                shield.style.left = '0';
                shield.style.width = '100%';
                shield.style.height = '100%';
                shield.style.border = '5px solid rgba(0, 191, 255, 0.5)';
                shield.style.pointerEvents = 'none';
                shield.style.zIndex = '9997';
                shield.style.animation = 'pulse 2s ease-in-out infinite';
                document.body.appendChild(shield);
            }

            // Laser Eyes - Add laser cursor effect
            if (hasItem('Laser Eyes')) {
                document.addEventListener('click', (e) => {
                    const laser = document.createElement('div');
                    laser.style.position = 'fixed';
                    laser.style.left = e.clientX + 'px';
                    laser.style.top = e.clientY + 'px';
                    laser.style.width = '100px';
                    laser.style.height = '2px';
                    laser.style.background = 'red';
                    laser.style.boxShadow = '0 0 10px red';
                    laser.style.pointerEvents = 'none';
                    laser.style.zIndex = '9999';
                    laser.style.transformOrigin = 'left center';
                    laser.style.animation = 'laser 0.3s ease-out';
                    document.body.appendChild(laser);
                    setTimeout(() => laser.remove(), 300);
                });
            }

            // Portal Gun - Add portal effects
            if (hasItem('Portal Gun')) {
                setInterval(() => {
                    const portal = document.createElement('div');
                    portal.textContent = 'ğŸŒ€';
                    portal.style.position = 'fixed';
                    portal.style.left = Math.random() * window.innerWidth + 'px';
                    portal.style.top = Math.random() * window.innerHeight + 'px';
                    portal.style.fontSize = '3rem';
                    portal.style.pointerEvents = 'none';
                    portal.style.zIndex = '9996';
                    portal.style.animation = 'spin 2s linear';
                    portal.style.opacity = '0.5';
                    document.body.appendChild(portal);
                    setTimeout(() => portal.remove(), 2000);
                }, 5000);
            }
        }

        // Add bounce animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes bounce {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-20px); }
            }
            @keyframes laser {
                from { width: 0; opacity: 1; }
                to { width: 200px; opacity: 0; }
            }
            @keyframes spin {
                from { transform: rotate(0deg) scale(1); opacity: 0.5; }
                to { transform: rotate(360deg) scale(0); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Initialize skittles on page load
        loadSkittles();
        if (skittlesEnabled) {
            document.getElementById('skittlesStatusText').textContent = 'Disable Skittles ğŸ¬';
            startSkittlesSpawning();
        }

        // Skittle Printer - Auto generate skittles
        function startSkittlePrinter() {
            if (hasItem('Skittle Printer')) {
                setInterval(() => {
                    const currentSkittles = loadSkittles();
                    saveSkittles(currentSkittles + 10);

                    // Show notification
                    const notif = document.createElement('div');
                    notif.textContent = 'ğŸ–¨ï¸ Printer generated +10 skittles!';
                    notif.style.position = 'fixed';
                    notif.style.top = '120px';
                    notif.style.right = '20px';
                    notif.style.background = 'linear-gradient(135deg, #4ecdc4, #44a6c6)';
                    notif.style.color = 'white';
                    notif.style.padding = '1rem 2rem';
                    notif.style.borderRadius = '15px';
                    notif.style.fontWeight = 'bold';
                    notif.style.boxShadow = '0 5px 20px rgba(0,0,0,0.3)';
                    notif.style.zIndex = '10001';
                    notif.style.animation = 'slideInRight 0.3s ease';
                    document.body.appendChild(notif);
                    setTimeout(() => notif.remove(), 3000);
                }, 60000); // Every 60 seconds
            }
        }

        // Function to refresh all effects
        window.refreshItemEffects = function() {
            console.log('ğŸ”„ Refreshing all item effects...');

            // Restart spawning with new parameters
            if (skittlesEnabled) {
                startSkittlesSpawning();
            }

            // Reapply visual effects
            applyItemEffects();

            // Restart printer if needed
            startSkittlePrinter();

            // Show active effects
            if (skittlesEnabled) {
                showActiveEffects();
            }

            console.log('âœ… Effects refreshed!');
            alert('âœ… Item effects refreshed! Your upgrades are now active!');
        };

        // Apply item effects
        applyItemEffects();
        startSkittlePrinter();
        if (skittlesEnabled) {
            showActiveEffects();
        }

        // Listen for storage changes (when items are purchased)
        window.addEventListener('storage', (e) => {
            if (e.key === 'inventory') {
                console.log('ğŸ’ Inventory changed! Refreshing effects...');
                setTimeout(() => refreshItemEffects(), 500);
            }
        });

        // Check for inventory changes periodically
        let lastInventory = JSON.stringify(getOwnedItems());
        setInterval(() => {
            const currentInventory = JSON.stringify(getOwnedItems());
            if (currentInventory !== lastInventory) {
                console.log('ğŸ’ Inventory changed! Refreshing effects...');
                lastInventory = currentInventory;

                if (skittlesEnabled) {
                    startSkittlesSpawning();
                    showActiveEffects();
                }
            }
        }, 2000);
    </script>
</body>
</html>
